<html lang="en" class="fontawesome-i2svg-active fontawesome-i2svg-complete">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#343a40">

    <!-- CSS Files -->

    <link href="assets/css/paper-bootstrap-wizard.css" rel="stylesheet" />


    <!-- Fonts and Icons -->
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
    <link href="assets/css/themify-icons.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://static.medishares.net/css/materialize.min.css">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/alertify.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/ghostframe.css">
    <link rel="stylesheet" href="css/dialog.css">
    <script src="js/jquery.min.js"></script>
    <title>莫与糖果盒子</title>
</head>

<body>
    <div class="image-container set-full-height" style="background-image: url('assets/img/letter1.jpg')">
        <div id="main-wrapper">
            <div class="dropdown">
                <style type="text/css">
                    a:link {
                        color: #3C3C3C;
                        text-decoration: underline;
                    }
                    
                    a:visited {
                        color: #0000FF;
                        text-decoration: none;
                    }
                    
                    a:hover {
                        color: #FF00FF;
                        text-decoration: none;
                    }
                    
                    a:active {
                        color: #D200D2;
                        text-decoration: none;
                    }
                </style>
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            Scatter 登录
                            <b class="caret"></b>
                        </a>
                <ul class="dropdown-menu">
                    <li style="padding-left: 5px;padding-right: 5px"><a href="#" id="log-btn">Login With Scatter</a></li>

                </ul>
            </div>

			 <div id="divselect"> 

						 <em><font color="red" size="4"> 点此登录 </font></em>
                        <ul class="account-ul">
                        </ul> 
                    </div> 

        </div>
		
		
        <center>
			
			<div class="col-sm-5">
                <div class="form-group">
                    <label> <font color="red" size="5"> 莫与糖果盒子          </font></label>
                </div>
            </div>
			
            <div class="col-sm-5">
                <div class="form-group">
                    <label> <font color="blue" size="3"> 领取200TEA代币*         </font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   </label>

					<button type="button" id="gettea" class='btn btn-finish btn-fill btn-primary btn-wd' >一键领取TEA代币</button>
					
                </div>
            </div>

            
            <div class="col-sm-5">
                <div class="form-group">
                    <label> <font color="blue" size="3"> 领取1000ENB代币*          </font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   </label>

					<button type="button" id="getenb" class='btn btn-finish btn-fill btn-primary btn-wd' >一键领取ENB代币</button>
					
                </div>
            </div>
			
			<div class="col-sm-5">
                <div class="form-group">
                    <label> <font color="blue" size="3"> 领取9999LOVEYOU*         </font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </label>

					<button type="button" id="getloveyou" class='btn btn-finish btn-fill btn-primary btn-wd' >一键领取LOVEYOU</button>
					
                </div>
            </div>
        </center>

        <module-template data-is="state-play">

            <div style="clear: both;">
            </div>
            <div style="clear: both;"></div>

            <div class="container" style="margin-top:-1rem;">
                <div class="row">
                    <div class="col-sm">

                        
                    </div>
                </div>
            </div>
        </module-template>

        <div class="mds-group">
            <link href="https://static.medishares.net/css/market/qixi2018.css" rel="stylesheet">
            <div class="my-protocol right-align">
                <a href="javascript:;" id="all" color="red">区块链浏览器</a>
            </div>
            <div class="qixi">
                <ul class="qixi-about">
                    <li>
                        <h3>关于莫与糖果盒子</h3>
                        <div>精选的糖果等你来领！只需要 点击一下 海量EOS糖果随你领！</div>
						<div>莫与糖果盒子所有糖果均由第三方项目提供</div>
                    </li>
					<li>
                        <h3>关于TEA代币</h3>
                        <ul class="application">
                            <li>1.TEA是基于区块链3.0 EOS生态发行茶叶通证，持仓50万TEA以上可以参加每日快照，每日北京时间23点分红！</li>
                       		<li>2.官方网站：http://www.51jianzhanjun.cn</li>
							<li>3.公众号是 eos-tea</li>
                        </ul>
                    </li>
					<li>
                        <h3>关于ENB代币</h3>
                        <ul class="application">
                            <li>ENB Platform是一个基于EOS Toker的综合服务平台，包括Toker质押、交易及综合理财等业务。</li>
                        </ul>
                    </li>
					<li>
                        <h3>关于LOVEYOU代币</h3>
                        <ul class="application">
                            <li>LOVEYOU是基于区块链 3.0 EOS主网发行的生态币， 致力于满足人们对爱情美好的向往，满足人们精神生活中各种场景表达爱的需要，致力于公益活动传递爱。在恋爱、生日、婚庆、纪念日、过年过节等喜庆的日子，使用LOVEYOU表达爱、享受各种高品质服务。并通过持有LOVEYOU享有其升值的权益。</li>
                        </ul>
                    </li>
                    <li>
                        <h3>代币领取注意事项</h3>
                        <ul class="application">
                            <li>1.后面带有“*”标志的项目，领取空投这个过程会占用账户RAM用以领取代币</li>
							<li>2.后面带有“*”标志的项目，领取空投会占用大概0.24KiB RAM资源</li>
							<li>3.后面带有“*”标志的项目，领取空投是即时到账</li>
							<li>4.后面带有“*”标志的项目，通过声明（signup）操作后，即可获得代币</li>
							<li>5.“莫与糖果盒子”由莫与独立开发，一切数据由本人在北京时间2018.10.12测试得出，不保证在后续没有变动。关注“深入浅出EOS”公众号，即可获取更多有趣的DAPP哦。</li>
							<li>6.由于用户填写错误造成的损失本DApp概不负责</li>
							<li>7.后面带有“*”标志的项目，空投限没有该代币的EOS账户领取</li>
                        </ul>
                    </li>
                    
                   
                    <li>
                        <h3>关于作者</h3>
                        <div>关于“莫与一键发币”。任何问题可以通过公众号“深入浅出EOS”联系原作者莫与。</div>
                    </li>
                </ul>
            </div>
        </div>
		<script src="js/tp.js"></script>
        <script src="js/alertify.js"></script>
        <script src="js/bootstrap.bundle.js"></script>
        <script src="js/fontawesome-all.min.js"></script>
        <script src="js/eos.min.js"></script>
        <script src="js/mDialogMin.js"></script>
        <script src="js/moment.min.js"></script>
        <script src="https://cdn.bootcss.com/bignumber.js/7.2.1/bignumber.min.js"></script>

        <script>
            $(function() {
				var isTP = tp.isConnected();
				tpAccount = null

				if (isTP) {
        $('.dropdown').hide();
        $('#divselect').show();

        $("#divselect em").click(function(){ 
            var ul = $("#divselect ul"); 
            if(ul.css("display")=="none"){ 
                ul.slideDown("fast"); 
            }else{ 
                ul.slideUp("fast"); 
            } 
        }); 
        $("#divselect ul").on('click', 'li', function(){ 
            var txt = $(this).text(); 
            $("#divselect em").html(txt); 
    
            $("#divselect ul").hide(); 
            tpAccount = txt;
        }); 

        var mySelect = $('.account-ul');
        tp.getWalletList('eos').then(function (data) {
            if (data.wallets && data.wallets['eos']) {
                var walletList = data.wallets['eos'];
                for(var i = 0; i < walletList.length; i++) {
                    var accountName = walletList[i].name;
                    mySelect.append('<li>' + accountName + '</li>')
                }
            }
        })
    }
					
                var scatter = null,
                    seletedTeam = null,
                    money = null,
                    eosPrice = null,
                    endTime = null,
                    roundMask = null,
                    roundRedMask = null,
                    roundKey = null,
                    isEnded = false,
                    isStarted = false,
                    isEnded = false,
                    roundBlueMask = null,
                    startTime = null,
                    endTime = null,
                    base = 1000000,
                    protocol = 'https',
                    host = 'api.tokenika.io',
                    port = 443,
                    chainId = "aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906";

                var network = {
                    protocol: protocol,
                    host: host,
                    port: port,
                    blockchain: 'eos',
                    chainId: chainId
                };

                console.log(protocol + "://" + host + ":" + port)

                document.addEventListener('scatterLoaded', function(scatterExtension) {
                    $(".scatter").hide();
                    scatter = window.scatter;
                    eos = scatter.eos(network, Eos, {}, "https");
                });

                if (localStorage.getItem('account')) {
                    $("#log-btn").html("Logout");
                } else {
                    $("#log-btn").html("Login With Scatter");
                }

                if (!scatter) $(".scatter").show()

                function getUrlParam(name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if (r != null) return unescape(r[2]);
                    return null;
                }

                $("#tixBuy").click(function() {
                    if (!localStorage.getItem('account') && !scatter) {
                        Dialog.init("Please install Scatter!");
                        return;
                    }

                    scatter.getIdentity({
                        accounts: [network]
                    }).then(function(identity) {
                        var account = identity.accounts[0];
                        var options = {
                            authorization: account.name + '@' + account.authority,
                            broadcast: true,
                            sign: true
                        };
                        var memo = '1-' + $('#inp1').val() + '-' + $('#inp2').val() + '-' + $('#inp3').val();
                        eos.transfer(account.name, 'emmmmmmmmmmm', '3.0000 EOS', memo, options).then(function(tx) {
                            Dialog.init("Success!");
                        }).catch(function(e) {
                            e = JSON.parse(e);
                            Dialog.init('Tx failed: ' + e.error.details[0].message);
                        })
                        doLoginSuccess(identity);
                    })
                });
				
					 $("#getloveyou").click(function() {
                    if (isTP) {
                        tp.pushEosAction({
                            actions: [
                                {
                                    account: 'okkkkkkkkkkk',
                                    name: 'signup',
                                    authorization: [{
                                        actor: tpAccount,
                                        permission: 'active'
                                    }],
                                    data: {
                                        owner: tpAccount,
                                        quantity: '0 LOVEYOU',
                                        ram_payer:tpAccount,
                                    }
                                 }
                            ],
                        }).then(function(data){
                                        Dialog.init('Success!');
                                    }).catch(function (err) {
                                        Dialog.init(JSON.stringify(err));
                                    });
                    }
                    else{

                    if (!localStorage.getItem('account') && !scatter) {
                        Dialog.init("Please install Scatter!");
                        return;
                    }

                    scatter.getIdentity({
                        accounts: [network]
                    }).then(function(identity) {
                        var account = identity.accounts[0];
                        var options = {
                            authorization: account.name + '@' + account.authority,
                            broadcast: true,
                            sign: true
                        };
                        var memo = '1-' + $('#inp1').val() + '-' + $('#inp2').val() + '-' + $('#inp3').val();

                        eos.contract('okkkkkkkkkkk', options).then(contract => {
                contract.signup(account.name, "0 LOVEYOU", account.name, options).then(function (tx) {
                    Dialog.init('Success!');
                    //getaccountinfo(account.name);
                }).catch(function (e) {
                    console.log(e);
                    e = JSON.parse(e);
                    if (e.error.details[0].message != "Invalid packed transaction") {
                        Dialog.init(e.error.details[0].message);
                    }
                });
            });

                        
                        doLoginSuccess(identity);
                    })
                    }
                });
				
				 $("#gettea").click(function() {
                    if (isTP) {
                        tp.pushEosAction({
                            actions: [
                                {
                                    account: 'linzongsheng',
                                    name: 'signup',
                                    authorization: [{
                                        actor: tpAccount,
                                        permission: 'active'
                                    }],
                                    data: {
                                        owner: tpAccount,
                                        quantity: '0.0000 TEA',
                                        ram_payer:tpAccount,
                                    }
                                 }
                            ],
                        }).then(function(data){
                                        Dialog.init('Success!');
                                    }).catch(function (err) {
                                        Dialog.init(JSON.stringify(err));
                                    });
                    }
                    else{

                    if (!localStorage.getItem('account') && !scatter) {
                        Dialog.init("Please install Scatter!");
                        return;
                    }

                    scatter.getIdentity({
                        accounts: [network]
                    }).then(function(identity) {
                        var account = identity.accounts[0];
                        var options = {
                            authorization: account.name + '@' + account.authority,
                            broadcast: true,
                            sign: true
                        };
                        var memo = '1-' + $('#inp1').val() + '-' + $('#inp2').val() + '-' + $('#inp3').val();

                        eos.contract('linzongsheng', options).then(contract => {
                contract.signup(account.name, "0.0000 TEA", account.name, options).then(function (tx) {
                    Dialog.init('Success!');
                    //getaccountinfo(account.name);
                }).catch(function (e) {
                    console.log(e);
                    e = JSON.parse(e);
                    if (e.error.details[0].message != "Invalid packed transaction") {
                        Dialog.init(e.error.details[0].message);
                    }
                });
            });

                        
                        doLoginSuccess(identity);
                    })
                    }
                });
				 $("#getenb").click(function() {
                    if (isTP) {
                        tp.pushEosAction({
                            actions: [
                                {
                                    account: 'eosenbpocket',
                                    name: 'signup',
                                    authorization: [{
                                        actor: tpAccount,
                                        permission: 'active'
                                    }],
                                    data: {
                                        owner: tpAccount,
                                        quantity: '0.0000 ENB',
                                        ram_payer:tpAccount,
                                    }
                                 }
                            ],
                        }).then(function(data){
                                        Dialog.init('Success!');
                                    }).catch(function (err) {
                                        Dialog.init(JSON.stringify(err));
                                    });
                    }
                    else{

                    if (!localStorage.getItem('account') && !scatter) {
                        Dialog.init("Please install Scatter!");
                        return;
                    }

                    scatter.getIdentity({
                        accounts: [network]
                    }).then(function(identity) {
                        var account = identity.accounts[0];
                        var options = {
                            authorization: account.name + '@' + account.authority,
                            broadcast: true,
                            sign: true
                        };
                        var memo = '1-' + $('#inp1').val() + '-' + $('#inp2').val() + '-' + $('#inp3').val();

                        eos.contract('eosenbpocket', options).then(contract => {
                contract.signup(account.name, "0.0000 ENB", account.name, options).then(function (tx) {
                    Dialog.init('Success!');
                    //getaccountinfo(account.name);
                }).catch(function (e) {
                    console.log(e);
                    e = JSON.parse(e);
                    if (e.error.details[0].message != "Invalid packed transaction") {
                        Dialog.init(e.error.details[0].message);
                    }
                });
            });

                        
                        doLoginSuccess(identity);
                    })
                    }
                });

                $("#log-btn").click(function() {

                    if (!localStorage.getItem('account') && !scatter) {
                        Dialog.init("Please install Scatter!");
                        return;
                    }

                    if ($(this).html() == "Logout") {
                        scatter.forgetIdentity().then(function() {
                            doLogoutSuccess();
                        });
                    } else {
                        localStorage.removeItem('account');
                        scatter.getIdentity({
                            accounts: [network]
                        }).then(function(identity) {
                            doLoginSuccess(identity);
                        }).catch(function(e) {
                            console.log(e);

                        });
                    }
                });


                function doLoginSuccess(identity) {
                    var account = identity.accounts[0];
                    console.log(account)
                    localStorage.setItem('account', JSON.stringify(account));
                    $("#log-btn").html("Logout");
                    //$("#refUrl").html("https://fomoeos.github.io?ref="+account.name);
                    //$(".scatter").hide();
                    return account;
                }

                function doLogoutSuccess() {
                    localStorage.removeItem('account');
                    $("#log-btn").html("Login With Scatter");
                    //$(".scatter").show();
                }

                $('#all').on('click', function() {
                    var account = identity.accounts[0];
                    window.location.href = ('https://eosflare.io/account/' + account.name);
                })
            })
        </script>
</body>

</html>
